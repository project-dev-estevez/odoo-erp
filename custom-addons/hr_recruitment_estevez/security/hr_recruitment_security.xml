<odoo>
    <!-- Grupo para ver solo los candidatos propios y sin asignarle reclutador -->
    <record id="group_hr_recruitment_own_manager" model="res.groups">
        <field name="name">Encargado: gestionar candidatos propios y sin reclutador asignado</field>
        <field name="category_id" ref="base.module_category_human_resources_recruitment"/>
        <field name="implied_ids" eval="[(4, ref('base.group_user'))]"/>
    </record>

    <!-- Regla de registro para ver solo candidatos propios y sin asignación en hr.applicant -->
    <record id="rule_hr_applicant_own_manager" model="ir.rule">
        <field name="name">Gestionar candidatos propios y sin reclutador asignado</field>
        <field name="model_id" ref="hr_recruitment.model_hr_applicant"/>
        <field name="domain_force">['|', ('user_id', '=', user.id), ('user_id', '=', False)]</field>
        <field name="groups" eval="[(4, ref('hr_recruitment_estevez.group_hr_recruitment_own_manager'))]"/>
    </record>

    <!-- Regla de registro para ver solo candidatos propios y sin asignación en hr.candidate -->
    <record id="rule_hr_candidate_own_manager" model="ir.rule">
        <field name="name">Gestionar candidatos propios y sin reclutador asignado</field>
        <field name="model_id" ref="hr_recruitment.model_hr_candidate"/>
        <field name="domain_force">['|', ('user_id', '=', user.id), ('user_id', '=', False)]</field>
        <field name="groups" eval="[(4, ref('hr_recruitment_estevez.group_hr_recruitment_own_manager'))]"/>
    </record>

    <!-- Permisos de acceso para el grupo group_hr_recruitment_own_manager sobre el modelo res.partner -->
    <record id="access_res_partner_own_manager" model="ir.model.access">
        <field name="name">access_res_partner_own_manager</field>
        <field name="model_id" ref="base.model_res_partner"/>
        <field name="group_id" ref="hr_recruitment_estevez.group_hr_recruitment_own_manager"/>
        <field name="perm_read" eval="1"/>
        <field name="perm_write" eval="1"/>
        <field name="perm_create" eval="1"/>
        <field name="perm_unlink" eval="0"/>
    </record>

    <!-- Permisos de acceso para el grupo driving_test sobre hr.job -->
    <record id="access_hr_job_driving_test" model="ir.model.access">
        <field name="name">access_hr_job_driving_test</field>
        <field name="model_id" ref="hr_recruitment.model_hr_job"/>
        <field name="group_id" ref="hr_recruitment_estevez.group_hr_recruitment_driving_test"/>
        <field name="perm_read" eval="1"/>
        <field name="perm_write" eval="0"/>
        <field name="perm_create" eval="0"/>
        <field name="perm_unlink" eval="0"/>
    </record>

    <!-- Permisos de acceso para el grupo driving_test sobre hr.recruitment.stage -->
    <record id="access_hr_recruitment_stage_driving_test" model="ir.model.access">
        <field name="name">access_hr_recruitment_stage_driving_test</field>
        <field name="model_id" ref="hr_recruitment.model_hr_recruitment_stage"/>
        <field name="group_id" ref="hr_recruitment_estevez.group_hr_recruitment_driving_test"/>
        <field name="perm_read" eval="1"/>
        <field name="perm_write" eval="0"/>
        <field name="perm_create" eval="0"/>
        <field name="perm_unlink" eval="0"/>
    </record>

    <!-- Permisos de acceso para el grupo driving_test sobre hr.applicant -->
    <record id="access_hr_applicant_driving_test" model="ir.model.access">
        <field name="name">access_hr_applicant_driving_test</field>
        <field name="model_id" ref="hr_recruitment.model_hr_applicant"/>
        <field name="group_id" ref="hr_recruitment_estevez.group_hr_recruitment_driving_test"/>
        <field name="perm_read" eval="1"/>
        <field name="perm_write" eval="1"/>
        <field name="perm_create" eval="0"/>
        <field name="perm_unlink" eval="0"/>
    </record>

    <!-- Regla de registro para permitir acceso solo a los registros de res.partner propios -->
    <record id="rule_res_partner_own_manager" model="ir.rule">
        <field name="name">Gestionar contactos propios</field>
        <field name="model_id" ref="base.model_res_partner"/>
        <field name="domain_force">['|', ('user_id', '=', user.id), ('user_id', '=', False)]</field>
        <field name="groups" eval="[(4, ref('hr_recruitment_estevez.group_hr_recruitment_own_manager'))]"/>
    </record>

    <!-- Grupo para ver solo los candidatos en la etapa de Examen Médico -->
    <record id="group_hr_recruitment_medical_exam" model="res.groups">
        <field name="name">Doctor: ver candidatos en Examen Médico</field>
        <field name="category_id" ref="base.module_category_human_resources_recruitment"/>
        <field name="implied_ids" eval="[(4, ref('base.group_user'))]"/>
    </record>

    <!-- Regla de registro para ver solo candidatos en la etapa de Examen Médico -->
    <record id="rule_hr_applicant_medical_exam" model="ir.rule">
        <field name="name">Ver candidatos en Examen Médico</field>
        <field name="model_id" ref="hr_recruitment.model_hr_applicant"/>
        <field name="domain_force">[('stage_id.name', '=', 'Examen Médico')]</field>
        <field name="groups" eval="[(4, ref('hr_recruitment_estevez.group_hr_recruitment_medical_exam'))]"/>
    </record>

    <!-- Grupo para ver solo los candidatos en la etapa de Prueba de Manejo -->
    <record id="group_hr_recruitment_driving_test" model="res.groups">
        <field name="name">Instructor: ver candidatos en Prueba de Manejo</field>
        <field name="category_id" ref="base.module_category_human_resources_recruitment"/>
        <field name="implied_ids" eval="[(4, ref('base.group_user'))]"/>
    </record>

    <!-- Regla de registro para ver solo candidatos en la etapa de Prueba de Manejo -->
    <record id="rule_hr_applicant_driving_test" model="ir.rule">
        <field name="name">Ver candidatos en Prueba de Manejo</field>
        <field name="model_id" ref="hr_recruitment.model_hr_applicant"/>
        <field name="domain_force">[('stage_id.name', '=', 'Prueba de Manejo')]</field>
        <field name="groups" eval="[(4, ref('hr_recruitment_estevez.group_hr_recruitment_driving_test'))]"/>
    </record>

    <!-- Acción personalizada para vista kanban de candidatos en Prueba de Manejo -->
    <record id="action_hr_applicant_driving_test_kanban" model="ir.actions.act_window">
        <field name="name">Candidatos - Prueba de Manejo</field>
        <field name="res_model">hr.applicant</field>
        <field name="view_mode">kanban,list,form</field>
        <field name="view_id" ref="hr_recruitment.hr_kanban_view_applicant"/>
        <field name="context">{
            'search_default_stage_id': [('name', '=', 'Prueba de Manejo')],
            'group_by': 'stage_id',
            'kanban_states_legend': {'Prueba de Manejo': 'info'}
        }</field>
        <field name="domain">[('stage_id.name', '=', 'Prueba de Manejo')]</field>
        <field name="help" type="html">
            <p class="o_view_nocontent_smiling_face">
                No hay candidatos en la etapa de Prueba de Manejo.
            </p>
        </field>
    </record>

    <!-- Menú personalizado para grupo driving_test -->
    <record id="menu_hr_applicant_driving_test" model="ir.ui.menu">
        <field name="name">Candidatos - Prueba de Manejo</field>
        <field name="action" ref="action_hr_applicant_driving_test_kanban"/>
        <field name="parent_id" ref="hr_recruitment.menu_hr_recruitment_root"/>
        <field name="sequence" eval="5"/>
        <field name="groups_id" eval="[(4, ref('group_hr_recruitment_driving_test'))]"/>
    </record>
</odoo>