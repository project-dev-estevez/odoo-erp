<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <data> 

        <!-- Heredar la vista de búsqueda -->
        <record id="view_employee_search_inherit" model="ir.ui.view">
            <field name="name">hr.employee.search.inherit</field>
            <field name="model">hr.employee</field>
            <field name="inherit_id" ref="hr.view_employee_filter"/> <!-- Asegúrate de que esta referencia sea correcta -->
            <field name="arch" type="xml">
                <!-- Modificar el filtro "Archived" -->
                <filter name="inactive" position="attributes">
                    <attribute name="string">Bajas</attribute>
                </filter>
            </field>
        </record>
 
        <!-- Heredar la vista de formulario -->
        <record id="view_employee_form_inherit" model="ir.ui.view">
            <field name="name">hr.employee.form.inherit</field>
            <field name="model">hr.employee</field>
            <field name="inherit_id" ref="hr.view_employee_form"/>
            <field name="arch" type="xml">
            
                <xpath expr="//header" position="inside">
                    <button name="action_archive_employee" 
                        string="Dar de baja" 
                        type="object" 
                        class="oe_highlight"
                        invisible="not active"/>  <!-- Solo visible si active=True -->
                </xpath>
                <xpath expr="//header" position="inside">
                    <button name="action_reactivate_employee"
                        string="Dar de alta"
                        type="object"
                        class="oe_highlight"
                        invisible="active"/>  <!-- Solo visible si active=False -->
                </xpath>

                <!-- Eliminar el grupo managers de su ubicación actual -->
                <xpath expr="//group[@name='managers']" position="replace">
                    <!-- Eliminar el grupo managers -->
                </xpath>

                <!-- Insertar el grupo managers en la página hr_settings -->
                <xpath expr="//notebook/page[@name='hr_settings']" position="inside">
                    <group name="managers" string="Aprobadores" class="hide-group-if-empty" invisible="1"/>
                </xpath>

                <!-- Nombres, Apellidos, # empleado, Proyecto y Etiquetas -->
                <xpath expr="//group/group[field[@name='work_email']]" position="replace">
                    <group>
                        <field name="names"/>
                        <field name="last_name"/>
                        <field name="mother_last_name"/>
                        <field name="employee_number"/>
                        <field name="project"/>
                        <field name="category_ids" widget="many2many_tags"
                                    options="{'color_field': 'color', 'no_create_edit': True}"
                                    placeholder="Tags" groups="hr.group_hr_user"/>
                    </group>
                </xpath>

                <!-- Compañia, Dirección, Departamento, Area, Puesto de Trabajo, Jefe Inmediato -->
                <xpath expr="//group/group[field[@name='department_id']]" position="replace">
                    <group>
                        <field name="company_id" string="Compañia" readonly="1" invisible="not direction_id"/>
                        <field name="direction_id" options="{'no_create': True}"/>
                        <field name="department_id" domain="[('direction_id', '=', direction_id)]" invisible="not direction_id" options="{'no_create': True}"/>
                        <field name="area_id" domain="[('department_id', '=', department_id)]" invisible="not department_id" options="{'no_create': True}"/>
                        <field name="job_id" domain="[('area_id', '=', area_id)]" invisible="not area_id" options="{'no_create': True}"/>
                        <field name="parent_id" domain="[('department_id', '=', department_id)]" string="Jefe Inmediato" options="{'no_create': True}"/>
                    </group>
                </xpath>

                <!-- Aplicar clases a todas las páginas dentro del notebook -->
                <xpath expr="//notebook/page" position="attributes">
                    <attribute name="class" add="bg-primary text-white shadow mb-3"/>
                </xpath>

                <!-- Aplicar clases a la página hr_settings -->
                <xpath expr="//notebook/page[@name='hr_settings']" position="attributes">
                    <attribute name="class" add="bg-primary text-white shadow mb-3"/>
                </xpath>

                <!-- Información de Trabajo -->
                <xpath expr="//notebook/page[@name='public']" position="replace">
                    <page name="public" string="Información de Trabajo" class="bg-primary text-white shadow mb-3">
                        <group string="Ubicación">
                            <group>
                                <field name="address_id" context="{'show_address': 1}" options="{'highlight_first_line': True, 'no_edit': True, 'no_create': True, 'no_open': True}" domain="[('is_company', '=', True)]"/>
                                <field name="work_location_id" context="{'default_address_id': address_id}" placeholder="e.g. Building 2, Remote, etc."/>
                            </group>
                        </group>
                        <group string="Contacto">
                            <group>
                                <field name="work_email" widget="email" placeholder="e.g. johndoe@estevezjor.mx"/>
                                <field name="work_phone" widget="phone"/>
                            </group>
                        </group>
                        <group string="Nómina">
                            <group>
                                <field name="imss_registration_date"/>
                                <field name="payment_type"/>
                                <field name="payroll_type"/>
                            </group>
                        </group>
                        <group name="departure" string="Departure" invisible="active">
                            <field name="departure_reason_id" options="{'no_edit': True, 'no_create': True, 'no_open': True}"/>
                            <field name="departure_description"/>
                            <field name="departure_date"/>
                        </group>
                        <group string="Horario de Trabajo">
                            <group>
                                <field name="resource_calendar_id" help="The default working hours are set in configuration."/>
                                <field name="id" invisible="1"/>
                                <field name="tz" required="id" invisible="1"/>
                            </group>
                        </group>
                    </page>
                </xpath>

                <!-- Información Personal -->
                <xpath expr="//notebook/page[@name='personal_information']" position="replace">
                    <page name="personal_information" string="Información Personal" groups="hr.group_hr_user" class="bg-primary text-white shadow mb-3">
                        <group string="Contacto Personal">
                            <group>
                                <div class="font-weight-bold">
                                    Dirección Personal
                                </div>
                                <br/>
                                <div class="o_address_format">
                                    <div class="row">
                                        <div class="col">
                                            <field name="private_country_id" placeholder="País" class="o_address_country" options='{"no_open": True, "no_create": True}'/>
                                        </div>
                                    </div>
                                    <div class="row g-1">
                                        <div class="col p-1">
                                            <field name="private_street" placeholder="Calle"/>
                                        </div>
                                        <div class="col p-1">
                                            <field name="private_street2" placeholder="Número"/>
                                        </div>
                                        <div class="col p-1">
                                            <field name="private_colonia" placeholder="Colonia"/>
                                        </div>
                                    </div>
                                    <div class="row g-1">
                                        <div class="col p-1">
                                            <field name="private_state_id" placeholder="Estado" options="{'no_open': True, 'no_quick_create': True}" context="{'default_country_id': private_country_id}"/>
                                        </div>
                                        <div class="col p-1">
                                            <field name="private_city" placeholder="Municipio"/>
                                        </div>
                                    </div>
                                    <div class="row g-1">
                                        <div class="col p-1">
                                            <field name="private_zip" placeholder="C.P"/>
                                        </div>
                                        <div class="col p-1">
                                            <field name="fiscal_zip" placeholder="C.P Fiscal"/>
                                        </div>
                                    </div>
                                </div>
                                <field name="private_email" placeholder="myprivateemail@example.com"/>
                                <field name="private_phone"/>
                                <field name="gender"/>
                            </group>                                    
                            <group>
                                <field name="birthday"/>
                                <field name="age" invisible="not birthday"/>
                                <field name="rfc"/>
                                <field name="curp"/>
                                <field name="nss"/>
                                <field name="voter_key"/>
                                <field name="infonavit"/> 
                                <field name="license_number"/>
                            </group>
                        </group>

                        <group>
                           <group string="Nacionalidad">
                                <field name="country_id" options='{"no_open": True, "no_create": True}'/>
                                <field name="country_of_birth"/>
                                <field name="place_of_birth"/>
                            </group>
                            <group string="Educación">
                                <field name="certificate"/>
                                <field name="study_field"/>
                                <field name="study_school"/>
                            </group> 
                        </group>

                        <group string="Permiso de Trabajo" invisible="is_mexico">
                            <field name="visa_no" invisible="is_mexico"/>
                            <field name="permit_no" invisible="is_mexico"/>
                            <field name="visa_expire" invisible="is_mexico"/>
                            <field name="work_permit_expiration_date" invisible="is_mexico"/>
                            <field name="work_permit_name" invisible="1"/>
                            <field name="has_work_permit" widget="work_permit_upload" filename="work_permit_name" invisible="is_mexico"/>
                        </group>

                        <group>                            
                            <group string="Contacto de Emergencia">
                                <field name="emergency_contact"/>
                                <field name="emergency_phone" class="o_force_ltr"/>
                            </group>

                            <group string="Situación Familiar">
                                <field name="marital"/>
                                <field name="spouse_complete_name" invisible="marital not in ['married', 'cohabitant']"/>
                                <field name="children"/>
                            </group>
                        </group>
                    </page>
                </xpath>

                <!-- Nueva página de Documentos -->
                <xpath expr="//notebook/page[@name='personal_information']" position="after">
                    <page name="documents" string="Documentos" class="bg-primary text-white shadow mb-3">
                    </page>
                </xpath>

                <!-- Nueva página de Incapacidades -->
                <xpath expr="//notebook/page[@name='documents']" position="after">
                    <page name="disabilities" string="Incapacidades" class="bg-primary text-white shadow mb-3">
                    </page>
                </xpath>

                <!-- Nueva página de Actas Administrativas -->
                <xpath expr="//notebook/page[@name='disabilities']" position="after">
                    <page name="memorandum" string="Actas Administrativas" class="bg-primary text-white shadow mb-3">
                    </page>
                </xpath>

                <!-- Nueva página de Vacaciones y permisos -->
                <xpath expr="//notebook/page[@name='memorandum']" position="after">
                    <page name="vacations and permits" string="Vacaciones y Permisos" class="bg-primary text-white shadow mb-3">
                    </page>
                </xpath>

                <!-- Nueva página de Asignaciones -->
                <xpath expr="//notebook/page[@name='vacations and permits']" position="after">
                    <page name="assignments" string="Asignaciones" class="bg-primary text-white shadow mb-3">
                    </page>
                </xpath>

                <!-- Nueva página de Incidencias -->
                <xpath expr="//notebook/page[@name='assignments']" position="after">
                    <page name="incidents" string="Incidencias" class="bg-primary text-white shadow mb-3">
                    </page>
                </xpath>

                <!-- Nueva página de Cursos -->
                <xpath expr="//notebook/page[@name='incidents']" position="after">
                    <page name="courses" string="Cursos" class="bg-primary text-white shadow mb-3">
                    </page>
                </xpath>

            </field>
        </record>

        <!-- Heredar la vista de lista -->
        <record id="view_employee_list_inherit" model="ir.ui.view">
            <field name="name">hr.employee.list.inherit</field>
            <field name="model">hr.employee</field>
            <field name="inherit_id" ref="hr.view_employee_tree"/>
            <field name="arch" type="xml">
                <field name="parent_id" position="attributes">
                    <attribute name="string">Jefe inmediato</attribute>
                </field>
                <field name="activity_ids" position="replace"/>
                <field name="activity_date_deadline" position="replace"/>
            </field>
        </record>

    </data>
</odoo>